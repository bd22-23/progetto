{% extends 'base.html' %}
{% import 'bootstrap/wtf.html' as wtf %}
{% block title %}
    Modifica {{ document.path }}
{% endblock %}
{% block app_content %}
    <div id="pspdfkit" style="width: 100%; height: 90vh;"></div>
{% endblock %}
{% block scripts %}
    {{ super() }}
    {% if document.path %}
    <script src="{{ url_for('static', filename='pspdfkit/dist/pspdfkit.js') }}"></script>
        <script>
        const initialViewState = new PSPDFKit.ViewState({
            readOnly: true,
        });
        PSPDFKit.load({
            container: '#pspdfkit',
            document: '{{ document.path }}',
            styleSheets: ['{{ url_for('static', filename='styles/pspdfkit.css') }}'],
            theme: PSPDFKit.Theme.DARK,
            initialViewState: initialViewState,
            {% if document.annotations %}
            instantJSON: {{ document.annotations|tojson }},
            {% endif %}
        }).catch(function (error) {
            console.error(error.message);
        });
    </script>
    {% endif %}
{% endblock %}