{% extends 'base.html' %}
{% block title %}
    {{ project.name }}
{% endblock %}
{% block app_content %}
    {% if project.releases %}
        <div class="my-3 status-pill {{ project.releases[-1].status.value }}">{{ project.releases[-1].status.label }}</div>
    {% endif %}
    <div>
        <h1>{{ project.title }}</h1>
        <p>
        {% for tag in project.tags %}
            <span class="badge rounded-pill tag-pill">
                <a href="{{ url_for('project.list', tag=tag.value) }}">{{ tag.value }}</a>
            </span>
        {% endfor %}
        </p>
        <h6 class="text-secondary">Creato il {{ project.created_at.strftime('%d/%m/%Y') }}</h6>
    </div>
    <p class="mb-2">Autori:
        {% for author in project.authors %}
            <a href="{{ url_for('researcher.profile', profile_id=author.id) }}">{{ author.name }} {{ author.surname }}</a>{% if not loop.last %}, {% endif %}
        {% endfor %}
    </p>
    {% if project.releases %}
    <div class="mb-2">
        Versioni:
        {% for release in project.releases %}
            <a class="btn btn-secondary btn-sm" href="{{ url_for('release.view', project_id=project.id, release_id=release.id) }}">{{ release.version }}</a>{% if not loop.last %} {% endif %}
        {% endfor %}
    </div>
    {% endif %}
    {% if not project.releases %}
        <a href="{{ url_for('release.new', project_id=project.id) }}" class="btn btn-secondary w-100 first-version-btn">
            <span>Crea la prima Versione!</span>
        </a>
    {% elif project.releases[-1].status.value == 'waiting' %}
        <a href="{{ url_for('release.new', project_id=project.id) }}" class="btn btn-secondary w-100">Nuova Versione</a>
    {% elif project.releases[-1].status.value == 'returned' %}
        <div class="tooltip-wrapper" data-bs-placement="top" data-bs-toggle="tooltip" data-bs-title="Non puoi creare versioni se sei in attesa!">
            <button class="btn btn-secondary w-100 disabled">Nuova Versione</button>
        </div>
    {% endif %}

    <hr class="solid mb-4">
    <h3 class="mb-4">Abstract</h3>
    <p>{{ project.abstract }}</p><br>
{% endblock %}

{% block scripts %}
    {{ super() }}
    <script>
        const tooltipTriggerList = document.querySelectorAll('[data-bs-toggle="tooltip"]')
        const tooltipList = [...tooltipTriggerList].map(tooltipTriggerEl => new bootstrap.Tooltip(tooltipTriggerEl))
    </script>
{% endblock %}
```
